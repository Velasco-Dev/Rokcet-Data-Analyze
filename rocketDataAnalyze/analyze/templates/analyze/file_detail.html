{% extends 'analyze/base.html' %}

{% block title %}AnÃ¡lisis - {{ file.name }}{% endblock %}

{% block content %}
<div class="container-header">
    <div class="container">
        <h1>ğŸ“Š AnÃ¡lisis: {{ file.name }}</h1>
        <p class="text-white">{{ file.filename }}</p>
    </div>
</div>

<div class="container-fluid">
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb bg-white p-3 rounded shadow-sm">
            <li class="breadcrumb-item"><a href="{% url 'analyze:dashboard' %}">Dashboard</a></li>
            <li class="breadcrumb-item active">{{ file.name }}</li>
        </ol>
    </nav>

    <!-- EstadÃ­sticas -->
    <div class="row mb-4">
        <div class="col-md-4">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h5 class="card-title mb-0">â„¹ï¸ InformaciÃ³n General</h5>
                </div>
                <div class="card-body">
                    <p><strong>Total de registros:</strong> {{ stats.total_records }}</p>
                    <p><strong>DuraciÃ³n:</strong> {{ stats.duration_minutes|floatformat:2 }} min</p>
                    <p><strong>Inicio:</strong> {{ stats.time_range.start }}</p>
                    <p><strong>Fin:</strong> {{ stats.time_range.end }}</p>
                </div>
            </div>
        </div>
        
        <div class="col-md-8">
            <div class="card">
                <div class="card-header bg-info text-white">
                    <h5 class="card-title mb-0">ğŸ“ˆ EstadÃ­sticas de Variables</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-4">
                            <h6 class="text-danger">ğŸŒ¡ï¸ Temperatura </h6>
                            <small>
                                <strong>MÃ¡x:</strong> {{ stats.temperature_stats.max|floatformat:2 }} Â°C<br>
                                <strong>MÃ­n:</strong> {{ stats.temperature_stats.min|floatformat:2 }} Â°C<br>
                                <strong>Media:</strong> {{ stats.temperature_stats.mean|floatformat:2 }} Â°C
                            </small>
                        </div>
                        <div class="col-md-4">
                            <h6 class="text-warning">ğŸ’¨ PresiÃ³n</h6>
                            <small>
                                <strong>MÃ¡x:</strong> {{ stats.pressure_stats.max|floatformat:2 }} kPa<br>
                                <strong>MÃ­n:</strong> {{ stats.pressure_stats.min|floatformat:2 }} kPa<br>
                                <strong>Media:</strong> {{ stats.pressure_stats.mean|floatformat:2 }} kPa
                            </small>
                        </div>
                        <div class="col-md-4">
                            <h6 class="text-success">ğŸ“ Altura</h6>
                            <small>
                                <strong>MÃ¡x:</strong> {{ stats.altitude_stats.max|floatformat:2 }} m<br>
                                <strong>MÃ­n:</strong> {{ stats.altitude_stats.min|floatformat:2 }} m<br>
                                <strong>Media:</strong> {{ stats.altitude_stats.mean|floatformat:2 }} m
                            </small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- GrÃ¡fica combinada -->
    <div class="card mb-4">
        <div class="card-header bg-success text-white">
            <h5 class="card-title mb-0">ğŸ”— Vista Combinada</h5>
        </div>
        <div class="card-body">
            {{ combined_plot|safe }}
        </div>
    </div>

    <!-- GrÃ¡ficas individuales interactivas -->
    <div class="card mb-4">
        <div class="card-header bg-warning text-dark">
            <h5 class="card-title mb-0">ğŸ“Š GrÃ¡ficas Individuales Interactivas</h5>
        </div>
        <div class="card-body">
            {{ interactive_plots.temperature|safe }}
            {{ interactive_plots.pressure|safe }}
            {{ interactive_plots.altitude|safe }}
        </div>
    </div>

    <!-- GrÃ¡fica matplotlib (estÃ¡tica) -->
    <div class="card mb-4">
        <div class="card-header bg-secondary text-white">
            <h5 class="card-title mb-0">ğŸ¨ Vista RÃ¡pida (Matplotlib)</h5>
        </div>
        <div class="card-body text-center">
            <img src="data:image/png;base64,{{ matplotlib_plot }}" 
                 alt="GrÃ¡ficas de anÃ¡lisis" class="img-fluid rounded">
        </div>
    </div>

    <!-- BotÃ³n volver -->
    <div class="mb-4">
        <a href="{% url 'analyze:dashboard' %}" class="btn btn-primary">
            â† Volver al Dashboard
        </a>
    </div>
</div>

{% endblock %}